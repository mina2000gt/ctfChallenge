def getbytes(bits):
    byte = 0
    for i in range(0,8):
        bit = int(bits[i])
        byte = (byte << 1) | bit
    return byte

lines = open('mis-ask/ask.csv','r').read().strip().split('\n')
dat = []
now = '0'
count = 0
updated = False
for line in lines:
    if line == now:
        updated = False
        count += 1
    else:
        dat.append((now,count))
        count = 1
        updated = True
        if now == '0':
            now = '1'
        else:
            now = '0'

if not updated:
    dat.append((now,count))

print(dat)

out = ''
for c, val in dat:
    if val % 31 != 0:
        print("Not good")
        break
    num = val//31
    for i in range(num):
        out += c

print(len(out))

byt = b''
for i in range(0,len(out),8):
    print(out[i:i+8])
    b = getbytes(out[i:i+8])
    byt += b.to_bytes(1, 'big')
print(byt)
